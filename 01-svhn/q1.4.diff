--- orinialtrain.py	2019-05-02 14:54:19.579368700 +0800
+++ train1.1.4.py	2019-05-02 15:28:27.873899500 +0800
@@ -33,7 +33,7 @@
 def main():
     parser = argparse.ArgumentParser()
     parser.add_argument('-c', '--continue', dest='continue_path', required=False)
-    parser.add_argument('-l', '--loss', default='softmax')
+    parser.add_argument('-l', '--loss', default='non-negative-max')
     args = parser.parse_args()
 
     assert args.loss in ['softmax', 'abs-max', 'square-max', 'plus-one-abs-max', 'non-negative-max']
@@ -67,8 +67,11 @@
                             tf.cast(tf.argmax(label_onehot, 1), dtype=tf.int32))
     accuracy = tf.reduce_mean(tf.cast(correct_pred, tf.float32))
     loss_reg = tf.add_n(tf.get_collection(tf.GraphKeys.REGULARIZATION_LOSSES))
-    loss = tf.losses.softmax_cross_entropy(label_onehot, logits) + loss_reg
-
+    if args.loss == 'softmax':
+        loss = tf.losses.softmax_cross_entropy(label_onehot, logits) + loss_reg
+    else :
+        loss = -tf.reduce_sum(label_onehot,preds) + loss_reg  #for homework 1.1
+    
     ## train config
     global_steps = tf.Variable(0, trainable=False)
     boundaries = [train_set.minibatchs_per_epoch*15, train_set.minibatchs_per_epoch*40]
@@ -167,4 +170,4 @@
     except KeyboardInterrupt:
         os._exit(1)
 
-# vim: ts=4 sw=4 sts=4 expandtab
\ No newline at end of file
+# vim: ts=4 sw=4 sts=4 expandtab
